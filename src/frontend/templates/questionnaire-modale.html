<div id="questionnaire-modal" style="display:none">
    <div class="card-container">
        <card class="question-detail" id="questionnaire-detail">
            <!-- En-tête avec titre et bouton fermer -->
            <div class="question-title">
                <h2 style="margin:0;">Création d'un nouveau questionnaire</h2>
                <button id="qr-close-btn" type="button" aria-label="Fermer la fenêtre" title="Fermer">
                    <img src="{{ url_for('static', filename='assets/icon-close.svg')}}">
                </button>
            </div>

            <!-- Intitulé du questionnaire -->
            <div class="q-question">
                <label for="qr-title-input">Intitulé</label>
                <input id="qr-title-input" type="text" name="title" placeholder="Saisir le titre du questionnaire"
                    required />
            </div>

            <!-- Sujets (select multiple + ajout) -->
            <div class="qr-subject">
                <label for="qr-subject-select">Sujets</label>
                <div class="q-row">
                    <select id="qr-subject-select" multiple size="4" aria-label="Subjects"></select>
                    <div class="q-adder">
                        <input id="qr-subject-add" type="text" placeholder="Ajouter un sujet..." />
                        <button type="button" id="qr-subject-add-btn">

                            Ajouter un sujet</button>
                    </div>
                </div>
            </div>

            <!-- Usages (select multiple + ajout) -->
            <div class="qr-use">
                <label for="qr-use-select">Usages</label>
                <div class="q-row">
                    <select id="qr-use-select" multiple size="4" aria-label="Uses"></select>
                    <div class="q-adder">
                        <input id="qr-use-add" type="text" placeholder="Ajouter un usage..." />
                        <button type="button" id="qr-use-add-btn">

                            Ajouter un usage</button>
                    </div>
                </div>
            </div>

            <!-- Remarque -->
            <div class="q-remark">
                <label for="qr-remark-input">Remarque</label>
                <input type="text" id="qr-remark-input" name="remark" placeholder="Optionnel" />
            </div>

            <!-- Informations (créateur, dates, statut) -->
            <div class="q-info">
                <div>Créé par : {{user.name}}</div>
                <div>Créé le :</div>
                <div>Modifié le :</div>
                <div>
                    <label for="qr-status-select">Statut</label>
                    <select id="qr-status-select" name="status">
                        <option value="draft" selected>Brouillon</option>
                        <option value="active">Actif</option>
                        <option value="archive">Archivé</option>
                    </select>
                </div>
            </div>

            <!-- Tableau des questions (visible en mode VIEW et EDIT uniquement) -->
            <div id="qr-modal-questions-container" class="table-container" style="display:none;">
                <h3>Questions du questionnaire</h3>
                <card class="scroll-card" id="qr-modal-questions-card">
                    <table id="qr-modal-qTable">
                        <thead>
                            <tr>
                                <th id="number">N°</th>
                                <th id="id">ID</th>
                                <th id="question">Question</th>
                                <th id="actions">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </card>

                <div id="qr-random-section" class="q-random" style="display:none;">

                    <div class="qr-random">
                        <div>
                            <h3>Ajouter des questions aléatoires</h3>
                            <label for="qr-random-number">Nombre de questions</label>
                            <input id="qr-random-number" type="number" min="1" max="50" value="5" />
                            <div class="random-info"></div>
                        </div>
                        <div class="q-row">
                            <label for="qr-random-subjects">Sujets<br><small>(Ctrl pour choix multiple)</small></label>
                            <select id="qr-random-subjects" multiple size="4"></select>
                        </div>

                        <button type="button" id="qr-random-add-btn" disabled>

                            Ajout aléatoire</button>
                    </div>
                </div>
            </div>

            <!-- Boutons d'action (enregistrer/réinitialiser) -->
            <div class="q-buttons">


                <button type="button" id="qr-submit-btn">

                    Enregistrer</button>
                <button type="button" id="qr-reset-btn" class="secondary">

                    Réinitialiser</button>
                <div id="resultMessage" class="info"></div>
            </div>

        </card>
    </div>
</div>